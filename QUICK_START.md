# ğŸš€ å¿«é€Ÿå¯åŠ¨æŒ‡å—

## ğŸ“‹ é‡æ„å®Œæˆæ¸…å•

âœ… **API å±‚é‡æ„å®Œæˆ**
- âœ… æ¨¡å—åŒ–è®¾è®¡ï¼ˆ15 ä¸ªæ–‡ä»¶ï¼ŒèŒè´£æ¸…æ™°ï¼‰
- âœ… ä¸‰å±‚æ¶æ„ï¼ˆè·¯ç”± â†’ æœåŠ¡ â†’ æ•°æ®ï¼‰
- âœ… é…ç½®ç®¡ç†ç»Ÿä¸€
- âœ… ä»£ç å¯ç»´æŠ¤æ€§æå‡
- âœ… æµ‹è¯•é€šè¿‡ï¼ŒæœåŠ¡æ­£å¸¸è¿è¡Œ

---

## ğŸ¯ æ–°é¡¹ç›®ç»“æ„

```
python_api/
â”œâ”€â”€ main.py                 # åº”ç”¨å…¥å£ï¼ˆ44 è¡Œï¼Œä» 137 è¡Œç²¾ç®€ï¼‰
â”œâ”€â”€ config.py               # é…ç½®ç®¡ç†
â”œâ”€â”€ .env.local              # ç¯å¢ƒå˜é‡
â”œâ”€â”€ .env.example            # é…ç½®æ¨¡æ¿
â”œâ”€â”€ README.md               # é¡¹ç›®æ–‡æ¡£
â”‚
â”œâ”€â”€ models/                 # æ•°æ®æ¨¡å‹
â”‚   â””â”€â”€ schemas.py
â”‚
â”œâ”€â”€ routes/                 # è·¯ç”±å±‚
â”‚   â”œâ”€â”€ health.py
â”‚   â”œâ”€â”€ auth.py
â”‚   â””â”€â”€ asr.py
â”‚
â”œâ”€â”€ services/               # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ auth_service.py
â”‚   â””â”€â”€ asr_service.py
â”‚
â”œâ”€â”€ database/               # æ•°æ®å±‚
â”‚   â””â”€â”€ connection.py
â”‚
â””â”€â”€ utils/                  # å·¥å…·å‡½æ•°
    â””â”€â”€ password.py
```

---

## ğŸ”§ å¯åŠ¨æœåŠ¡

### æ–¹æ³• 1: ä½¿ç”¨åŸå‘½ä»¤ï¼ˆä»ç„¶æœ‰æ•ˆï¼‰
```powershell
& ".venv/Scripts/python.exe" -m uvicorn python_api.main:app --host 0.0.0.0 --port 8000 --reload
```

### æ–¹æ³• 2: ç®€åŒ–å‘½ä»¤
```powershell
cd "d:\all projects\Dialect_Master"
.venv\Scripts\activate
uvicorn python_api.main:app --reload
```

---

## ğŸ“š è®¿é—® API æ–‡æ¡£

å¯åŠ¨æœåŠ¡åè®¿é—®ï¼š
- **Swagger UI**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc
- **å¥åº·æ£€æŸ¥**: http://localhost:8000/hello

---

## ğŸ¨ API æ¥å£åˆ—è¡¨

### å¥åº·æ£€æŸ¥
- `GET /hello` - æœåŠ¡å¥åº·æ£€æŸ¥

### ç”¨æˆ·è®¤è¯
- `POST /register` - ç”¨æˆ·æ³¨å†Œ
- `POST /login` - ç”¨æˆ·ç™»å½•

### è¯­éŸ³è¯†åˆ«
- `POST /sensevoice` - è¯­éŸ³è½¬æ–‡å­—

---

## ğŸ“ é…ç½®è¯´æ˜

### é¦–æ¬¡ä½¿ç”¨
1. å¤åˆ¶é…ç½®æ¨¡æ¿ï¼š
```powershell
cp python_api/.env.example python_api/.env.local
```

2. ç¼–è¾‘ `.env.local` å¡«å†™æ•°æ®åº“ä¿¡æ¯ï¼š
```env
DB_HOST=localhost
DB_PORT=5432
DB_NAME=your_database_name
DB_USER=your_database_user
DB_PASSWORD=your_database_password
```

---

## ğŸ‰ é‡æ„ä¼˜åŠ¿

### ä»£ç è´¨é‡æå‡
- **å¯è¯»æ€§**: æ¯ä¸ªæ–‡ä»¶èŒè´£å•ä¸€ï¼Œæ˜“äºç†è§£
- **å¯ç»´æŠ¤æ€§**: æ¨¡å—åŒ–è®¾è®¡ï¼Œä¿®æ”¹å½±å“èŒƒå›´å°
- **å¯æµ‹è¯•æ€§**: ä¸šåŠ¡é€»è¾‘ç‹¬ç«‹ï¼Œæ˜“äºå•å…ƒæµ‹è¯•
- **å¯æ‰©å±•æ€§**: æ·»åŠ æ–°åŠŸèƒ½åªéœ€åˆ›å»ºæ–°æ¨¡å—

### å¼€å‘æ•ˆç‡æå‡
- **æ¸…æ™°çš„æ¶æ„**: æ–°æˆå‘˜å¿«é€Ÿä¸Šæ‰‹
- **ä»£ç å¤ç”¨**: æœåŠ¡å±‚å¯è¢«å¤šä¸ªè·¯ç”±è°ƒç”¨
- **é”™è¯¯å®šä½**: é—®é¢˜å¿«é€Ÿå®šä½åˆ°å…·ä½“æ¨¡å—

---

## ğŸ“Š ä»£ç å¯¹æ¯”

| æŒ‡æ ‡ | é‡æ„å‰ | é‡æ„å | æ”¹è¿› |
|------|--------|--------|------|
| æ–‡ä»¶æ•° | 1 | 15 | +1400% |
| main.py è¡Œæ•° | 137 | 44 | -68% |
| æ¨¡å—åŒ–ç¨‹åº¦ | ä½ | é«˜ | â­â­â­â­â­ |
| å¯ç»´æŠ¤æ€§ | ä½ | é«˜ | â­â­â­â­â­ |
| å¯æµ‹è¯•æ€§ | ä½ | é«˜ | â­â­â­â­â­ |

---

## ğŸ” ä¸‹ä¸€æ­¥ä¼˜åŒ–å»ºè®®

### é«˜ä¼˜å…ˆçº§
1. âœ… **API å±‚é‡æ„**ï¼ˆå·²å®Œæˆï¼‰
2. ğŸ“ **æ·»åŠ å•å…ƒæµ‹è¯•**
   - ä½¿ç”¨ pytest
   - æµ‹è¯•è¦†ç›–ç‡ > 80%

3. ğŸ”„ **æ•°æ®åº“è¿ç§»å·¥å…·**
   - ä½¿ç”¨ Alembic
   - ç‰ˆæœ¬åŒ–ç®¡ç†æ•°æ®åº“ç»“æ„

### ä¸­ä¼˜å…ˆçº§
4. ğŸ“– **API æ–‡æ¡£å®Œå–„**
   - æ·»åŠ æ›´å¤šç¤ºä¾‹
   - é”™è¯¯ç è¯´æ˜

5. ğŸ” **JWT è®¤è¯**
   - æ›¿æ¢å½“å‰çš„ç®€å•è®¤è¯
   - æ·»åŠ  token åˆ·æ–°æœºåˆ¶

### ä½ä¼˜å…ˆçº§
6. ğŸ³ **Docker å®¹å™¨åŒ–**
7. ğŸš€ **CI/CD æµç¨‹**
8. ğŸ“ˆ **ç›‘æ§å’Œæ—¥å¿—**

---

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### æ·»åŠ æ–°åŠŸèƒ½ï¼šç”¨æˆ·ä¸ªäººèµ„æ–™

#### 1. åˆ›å»ºæ¨¡å‹ (`models/schemas.py`)
```python
class UserProfile(BaseModel):
    user_id: int
    nickname: str
    avatar: Optional[str] = None
```

#### 2. åˆ›å»ºæœåŠ¡ (`services/profile_service.py`)
```python
class ProfileService:
    @staticmethod
    def get_profile(user_id: int):
        conn = get_db_connection()
        # ... ä¸šåŠ¡é€»è¾‘
        return {"user_id": user_id, "nickname": "ç”¨æˆ·"}
```

#### 3. åˆ›å»ºè·¯ç”± (`routes/profile.py`)
```python
from fastapi import APIRouter
from ..services import ProfileService

router = APIRouter(tags=["ç”¨æˆ·èµ„æ–™"])

@router.get("/profile/{user_id}")
def get_profile(user_id: int):
    return ProfileService.get_profile(user_id)
```

#### 4. æ³¨å†Œè·¯ç”± (`main.py`)
```python
from .routes import profile_router
app.include_router(profile_router)
```

---

## ğŸŠ æ€»ç»“

**é‡æ„æˆåŠŸï¼** ğŸ‰

åŸæ¥è‡ƒè‚¿çš„ 137 è¡Œ `main.py` å·²ç»è¢«é‡æ„ä¸ºæ¸…æ™°ã€æ¨¡å—åŒ–çš„æ¶æ„ï¼š
- âœ… ä»£ç æ›´æ¸…æ™°
- âœ… æ›´æ˜“ç»´æŠ¤
- âœ… æ›´æ˜“æ‰©å±•
- âœ… æ›´æ˜“æµ‹è¯•

**ç°åœ¨ä½ å¯ä»¥æ›´é«˜æ•ˆåœ°å¼€å‘æ–°åŠŸèƒ½äº†ï¼** ğŸš€
